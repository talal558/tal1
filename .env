# ğŸ“Œ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±Ù†Ø©
from decouple import UndefinedValueError

DATABASES = {}

# Ø£ÙˆÙ„ÙˆÙŠØ© 1: DATABASE_URL (Ø¥Ù† ÙˆÙÙ‘Ø±ØªÙ‡ Render Ø£Ùˆ Ø®Ø¯Ù…Ø© Ø§Ù„Ø§Ø³ØªØ¶Ø§ÙØ©)
DATABASE_URL = config('DATABASE_URL', default=None)
if DATABASE_URL:
    # Ù„Ùˆ Ø­Ø¨ÙŠØª Ø§Ø³ØªØ®Ø¯Ø§Ù… dj-database-url:
    # pip install dj-database-url
    import dj_database_url
    DATABASES['default'] = dj_database_url.parse(DATABASE_URL, conn_max_age=600, ssl_require=not DEBUG)
else:
    # Ø£ÙˆÙ„ÙˆÙŠØ© 2: Ù…ÙØ§ØªÙŠØ­ PostgreSQL ØµØ±ÙŠØ­Ø© ÙˆÙƒØ§Ù…Ù„Ø©
    db_engine = 'django.db.backends.postgresql'
    db_name   = config('DB_NAME', default=None)
    db_user   = config('DB_USER', default=None)
    db_pass   = config('DB_PASSWORD', default=None)
    db_host   = config('DB_HOST', default=None)
    db_port   = config('DB_PORT', default='5432')

    if not DEBUG and all([db_name, db_user, db_pass, db_host]):
        DATABASES['default'] = {
            'ENGINE': db_engine,
            'NAME': db_name,
            'USER': db_user,
            'PASSWORD': db_pass,
            'HOST': db_host,
            'PORT': db_port,
        }
    else:
        # Ø£ÙˆÙ„ÙˆÙŠØ© 3: SQLite Ù„Ù„ØªØ·ÙˆÙŠØ±
        DATABASES['default'] = {
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': BASE_DIR / 'db.sqlite3',
        }
whitenoise==6.7.0
python-decouple==3.8
dj-database-url==2.3.0
psycopg2-binary==2.9.9
